# 🌟 AIFFELTHON (2022-11-4 ~ 2022-12-12)

## ❗ 해당 프로젝트는 기업 보안 문제로 인해 결과 이미지를 삭제 하였습니다. 양해 부탁드립니다.

### 이 프로젝트는 AIFFEL에서 주최한 AIMMO 연계 기업 프로젝트입니다.

## 👨‍👨‍👦 팀 소개
<h3>Team : AIMMOYA (AI Manages Mobility On Your behAlf)</h3>
<h4>Team Meaning : AI가 당신을 대신해서 자동차를 관리한다.</h4>         

### 👥 구성원
|직책|이름|역할|
|:--:|:--:|:--:|
|팀장|곽민기|데이터 분석, 모델 리서치 및 학습 (EfficientDet), ppt작성|
|팀원|장준영|데이터 선별 및 가공, 모델 리서치 및 학습 (YOLOv7), 깃허브 정리|
|팀원|윤정덕|이미지 리사이징, 모델 리서치 및 학습 (Faster R-CNN), 노션 정리|

## 🏅 프로젝트 목표
```
주어진 데이터를 분석및 가공하여 자율주행에 적합한 데이터를 선별하고
객체 탐지 모델을 선정 후 모델 학습 및 개선을 통해 각 모델의 결과를 비교, 분석한다.
```
### 🔹 데이터셋
```
AIMMO 측에서 제공한 데이터중 (날씨:(맑음or흐림) 일시:주간)인 데이터 3.7만장 사용
```
## 📑 프로젝트 진행 과정
|순서|내용|기간|
|:--:|:--:|:--:|
|데이터 분석|데이터 분석, 데이터 가공, 데이터 선별|11/4 ~ 12/2|
|논문 리뷰|YOLOv7, EfficientDet, Faster-RCNN|11/11 ~ 11/16|
|모델 구현|모델 input 형식에 맞게 데이터 가공, 학습 테스트|11/12 ~ 12/2|
|최적화|하이퍼 파라미터 조정, 결과 분석|12/2 ~ 12/7|

## 🏆 프로젝트 결과

### YOLOv7
|-|Precision|Recall|F1_score|AP|mAP|
|:--:|:--:|:--:|:--:|:--:|:--:|
|car|0.841|0.873|0.857|0.87||
|pedestrian|0.733|0.541|0.623|0.491||
|truck|0.835|0.754|0.792|0.735||
|bus|0.852|0.666|0.748|0.655||
|all|||||0.688|


### Faster-RCNN
|-|Precision|Recall|F1_score|AP|mAP|
|:--:|:--:|:--:|:--:|:--:|:--:|
|car|0.96|0.88|0.918|0.845||
|pedestrian|0.743|0.571|0.646|0.424||
|truck|0.862|0.819|0.84|0.706||
|bus|0.845|0.811|0.828|0.686||
|all|||||0.665|

- YOLOv7과 Faster R-CNN에서 객체 별 P, R값을 비교했을 때 전체적으로 R 값보단 P 값이 더 큰 것을 확인할 수 있었다. 특히 pedestrian에 대한 P, R값 차이가 가장 크고 AP가 낮았는데 해당 문제는 pedestrian 객체 자체가 주로 잘려있거나 겹쳐져 있는 경우가 많아서 그런 것으로 추측된다.

- bus 객체는 P, R 값은 크게 낮지는 않지만 다른 객체에 비해 AP 값이 낮은 것을 확인할 수 있었다. 해당 문제는 주로 bus 객체가 긴 탓에 잘리거나 가려져서 나온 이미지가 많기 때문이라고 추측된다.

- 두 모델 모두 주로 객체의 수가 적거나 객체의 크기가 작은 물체에 대해 성능이 좋지 않았다.

- 따라서 데이터 수를 더 늘려 객체 수가 작던 부분을 해결하고 크기가 작은 객체에 대해선 loss 가중치나 다른 detection에 직접적인 영향을 주는 하이퍼파라미터들을 수정하여 해결할 수 있을 듯하다.

- 우리가 만든 모델의 경우 Precision이 Recall에 비해 높기 때문에 정확한 detection에 유용하고 오검출 확률이 낮아지므로 불필요한 움직임을 최소화 할 수 있으므로 자동차를 이용하는 고객에게 보다 편안한 주행 서비스를 제공할 수 있을 것으로 보인다.

- 하지만 pedestrian의 mAP가 상대적으로 낮고 Recall이 Precision에  비해 낮기 때문에 안전사고의 위험성을 보장 하기는 쉽지 않아 보인다.

## 🎞️ 회고
### 장준영님
- 데이터는 양과 다양성이 아주 중요한 것 같다.
- 수많은 에러와 마주치고 해결하는 과정을 꼼꼼히 정리하지 않은 게 아쉽다.
- 시간에 쫓기다 보니 계획을 벗어나는 일이 많아 그나마도 부족한 시간을 제대로 활용하지 못했던 것 같다.
- 다음에 기회가 된다면 모델의 전체적인 흐름을 세밀하게 분석하여 모델을 확실히 이해하고 학습에 임하고 싶다.

### 곽민기님
- 처음부터 좀 더 계획적으로 프로젝트를 진행했으면 시간적 여유가 좀 더 있었을 것 같은 후회가 남는다.
- 수많은 에러와 시도를 거쳐 모델을 완성했지만, 알 수 없는 이유로 결과를 제대로 못 본 게 아쉽다.
- 많은 것이 처음이라서 답답하고 지치기도 했지만 좋은 경험을 한 것 같다.
- 다음에 에이모 측에서 데이터가 오픈된다면 EfficientDet의 문제를 해결하여 결과를 제대로 보고 싶다.

### 윤정덕님
- backbone을 ConvNeXt, Swin 실험 등으로 바꿔서 성능향상을 이루지 못해 아쉬웠다.
- Sparse R-CNN, Double-Head R-CNN 등 다른 최신 R-CNN 계열이라면 어떤 결과였을지 궁금하다.
- 나중에 MMdetection이 어느 정도 익숙해지면 모델로 비교하면 하면서 특징을 알아보고 싶다
- R-CNN 계열을 맡았지만, 관련 논문을 많이 읽지 못했다. R-CNN부터 Dynamic R-CNN 등 여러가지 R-CNN 
계열 논문을 읽고, github 등을 참고하여 논문 구현을 하고 싶다.